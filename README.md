Портированный блок ПИД регулятора Siemens FC41 на STM32.
Получился мощный и довольно быстрый алгоритм ПИД регулятора со множеством функций и возможностей. Имеется возможность блокировать ненужные функции (можно запрограммировать как ПИД,ПИ,П,ПД,И регулятор ). Был проверен в работе на реальном объекте (инкубатор на 1000 яиц), показал отличные стабильные результаты. 
Так же проверялась работа на МК ATMEGA 8, результат отличный!
Перед использованием необходимо настроить параметры регулятора в функции FC41_Init() блока FB41.c, там все расписал максимально подробно для понимания.
Вызов функции расчета ПИД регулятора FC41() необходимо вызывать строго в равные промежутки времени используя прерывание. Иначе регулятор будет работать некорректно!

Пример использования (вырезка из рабочего проекта).

//****PID регулятор (период 1 сек)****// 

if (flag_pid)                                  ; //флаг взводится в прерывании таймера каждую секунду
{
	temperature = AHT10_readTemperature(true);    ;// Читаем температуру из датчика

}	
   if (flag_pid & !sensor_Err & !stop_PID)      
     { 
             
         PV_IN = temperature;                  // передаем температуру регулятору
         FC41();                               // активируем регулятор
         COM_RST = 0;                          //сброс бита рестарта регулятора (делать обязательно, бит взводится при инициализации ПИД)
         TIM1->CCR3 = (uint32_t)LMN;           // управляющее воздействие на PWM выход	 
         flag_pid = 0;                         //сброс флага
     } 
